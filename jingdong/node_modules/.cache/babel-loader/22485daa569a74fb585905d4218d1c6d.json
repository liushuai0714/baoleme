{"remainingRequest":"/Users/liushuai/Desktop/jingdong/node_modules/thread-loader/dist/cjs.js!/Users/liushuai/Desktop/jingdong/node_modules/babel-loader/lib/index.js!/Users/liushuai/Desktop/jingdong/node_modules/eslint-loader/index.js??ref--14-0!/Users/liushuai/Desktop/jingdong/src/store/index.js","dependencies":[{"path":"/Users/liushuai/Desktop/jingdong/src/store/index.js","mtime":1678190655046},{"path":"/Users/liushuai/Desktop/jingdong/babel.config.js","mtime":1677648653010},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/thread-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/babel-loader/lib/index.js","mtime":1677648644634},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/eslint-loader/index.js","mtime":1677648643957}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlU3RvcmUgfSBmcm9tICd2dWV4JzsKY29uc3Qgc2V0TG9jYWxDYXJ0TGlzdCA9IHN0YXRlID0+IHsKICBjb25zdCB7CiAgICBjYXJ0TGlzdAogIH0gPSBzdGF0ZTsKICBjb25zdCBjYXJ0TGlzdFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGNhcnRMaXN0KTsKICBsb2NhbFN0b3JhZ2UuY2FydExpc3QgPSBjYXJ0TGlzdFN0cmluZzsKfTsKY29uc3QgZ2V0TG9jYWxDYXJ0TGlzdCA9ICgpID0+IHsKICB0cnkgewogICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmNhcnRMaXN0KTsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4ge307CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBjcmVhdGVTdG9yZSh7CiAgc3RhdGU6IHsKICAgIGNhcnRMaXN0OiBnZXRMb2NhbENhcnRMaXN0KCkKICAgIC8vIGNhcnRMaXN0OiB7CiAgICAvLyBzaG9wSWQ6IHsKICAgIC8vIHNob3BOYW1l77ya5rKD5bCU546bCiAgICAvLyBwcm9kdWN0TGlzdDp7CiAgICAvLyAgIHByb2R1Y3RJZDogewogICAgLy8gICAgIF9pZDogIjEiLAogICAgLy8gICAgIG5hbWU6ICLnlarojIQgMjUwZyAvIOS7vSIsCiAgICAvLyAgICAgaW1nVXJsOiAiaHR0cDovL3d3dy5kZWxsLWxlZS5jb20vaW1ncy92dWUzL3RvbWF0by5wbmciLAogICAgLy8gICAgIHNhbGVzOiAxMCwKICAgIC8vICAgICBwcmljZTogMzMuNiwKICAgIC8vICAgICBvbGRQcmljZTogMzkuNiwKICAgIC8vICAgICBjb3VudDoxLAogICAgLy8gICB9CiAgICAvLyB9LAogICAgLy8gICAgIH0KICAgIC8vIH0KICB9LAoKICBtdXRhdGlvbnM6IHsKICAgIGNoYW5nZUNhcnRJdGVtSW5mbyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICAvL+iOt+WPluWIsOS8oOmAkui/h+adpeeahOWVhumTumlk77yM6YeM6Z2i55qE5ZWG5ZOBaWTvvIzllYblk4Hor6bmg4UKICAgICAgY29uc3QgewogICAgICAgIHNob3BJZCwKICAgICAgICBwcm9kdWN0SWQsCiAgICAgICAgcHJvZHVjdEluZm8sCiAgICAgICAgbnVtCiAgICAgIH0gPSBwYXlsb2FkOwogICAgICBsZXQgc2hvcEluZm8gPSBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdIHx8IHsKICAgICAgICBzaG9wTmFtZTogIiIsCiAgICAgICAgcHJvZHVjdExpc3Q6IHt9CiAgICAgIH07CiAgICAgIGxldCBwcm9kdWN0ID0gc2hvcEluZm8ucHJvZHVjdExpc3RbcHJvZHVjdElkXTsKICAgICAgaWYgKCFwcm9kdWN0KSB7CiAgICAgICAgcHJvZHVjdEluZm8uY291bnQgPSAwOwogICAgICAgIHByb2R1Y3QgPSBwcm9kdWN0SW5mbzsKICAgICAgfQogICAgICBwcm9kdWN0LmNvdW50ICs9IG51bTsKICAgICAgaWYgKG51bSA+IDApIHsKICAgICAgICBwcm9kdWN0LmNoZWNrID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAocHJvZHVjdC5jb3VudCA8IDApIHsKICAgICAgICBwcm9kdWN0LmNvdW50ID0gMDsKICAgICAgfQogICAgICA7CiAgICAgIC8v5oqK5ZWG5ZOB5L+h5oGv5re75Yqg5Yiw56m655qEc2hvcEluZm/kuK0KICAgICAgc2hvcEluZm8ucHJvZHVjdExpc3RbcHJvZHVjdElkXSA9IHByb2R1Y3Q7CiAgICAgIC8v5oqK5bqX6ZO65ZKM5ZWG5ZOB5L+h5oGv6YO95re75Yqg5Yiwc3RvcmXkuK0KICAgICAgc3RhdGUuY2FydExpc3Rbc2hvcElkXSA9IHNob3BJbmZvOwogICAgICBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKTsKICAgIH0sCiAgICBjaGFuZ2VTaG9wTmFtZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBjb25zdCB7CiAgICAgICAgc2hvcElkLAogICAgICAgIHNob3BOYW1lCiAgICAgIH0gPSBwYXlsb2FkOwogICAgICBjb25zdCBzaG9wSW5mbyA9IHN0YXRlLmNhcnRMaXN0W3Nob3BJZF0gfHwgewogICAgICAgIHNob3BOYW1lOiAiIiwKICAgICAgICBwcm9kdWN0OiB7fQogICAgICB9OwogICAgICBzaG9wSW5mby5zaG9wTmFtZSA9IHNob3BOYW1lOwogICAgICBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdID0gc2hvcEluZm87CiAgICAgIHNldExvY2FsQ2FydExpc3Qoc3RhdGUpOwogICAgfSwKICAgIGNoYW5nZUNhcnRJdGVtQ2hlY2tlZChzdGF0ZSwgcGF5bG9hZCkgewogICAgICBjb25zdCB7CiAgICAgICAgc2hvcElkLAogICAgICAgIHByb2R1Y3RJZAogICAgICB9ID0gcGF5bG9hZDsKICAgICAgY29uc3QgcHJvZHVjdCA9IHN0YXRlLmNhcnRMaXN0W3Nob3BJZF0ucHJvZHVjdExpc3RbcHJvZHVjdElkXTsKICAgICAgcHJvZHVjdC5jaGVjayA9ICFwcm9kdWN0LmNoZWNrOwogICAgICBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKTsKICAgIH0sCiAgICBjbGVhbkNhcnRQcm9kdWN0cyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBjb25zdCB7CiAgICAgICAgc2hvcElkCiAgICAgIH0gPSBwYXlsb2FkOwogICAgICBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdLnByb2R1Y3RMaXN0ID0ge307CiAgICAgIHNldExvY2FsQ2FydExpc3Qoc3RhdGUpOwogICAgfSwKICAgIHNldENhcnRJdGVtc0NoZWNrZWQoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgY29uc3QgewogICAgICAgIHNob3BJZAogICAgICB9ID0gcGF5bG9hZDsKICAgICAgY29uc3QgcHJvZHVjdHMgPSBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdLnByb2R1Y3RMaXN0OwogICAgICBpZiAocHJvZHVjdHMpIHsKICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9kdWN0cykgewogICAgICAgICAgY29uc3QgcHJvZHVjdCA9IHByb2R1Y3RzW2tleV07CiAgICAgICAgICBwcm9kdWN0LmNoZWNrID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgc2V0TG9jYWxDYXJ0TGlzdChzdGF0ZSk7CiAgICB9LAogICAgY2xlYXJDYXJ0RGF0YShzdGF0ZSwgc2hvcElkKSB7CiAgICAgIHN0YXRlLmNhcnRMaXN0W3Nob3BJZF0ucHJvZHVjdExpc3QgPSB7fTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHt9LAogIG1vZHVsZXM6IHt9Cn0pOw=="},{"version":3,"names":["createStore","setLocalCartList","state","cartList","cartListString","JSON","stringify","localStorage","getLocalCartList","parse","e","mutations","changeCartItemInfo","payload","shopId","productId","productInfo","num","shopInfo","shopName","productList","product","count","check","changeShopName","changeCartItemChecked","cleanCartProducts","setCartItemsChecked","products","key","clearCartData","actions","modules"],"sources":["/Users/liushuai/Desktop/jingdong/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\n\n\nconst setLocalCartList = (state) => {\n  const { cartList } = state\n  const cartListString = JSON.stringify(cartList)\n  localStorage.cartList = cartListString\n}\n\nconst getLocalCartList = () => {\n  try {\n    return JSON.parse(localStorage.cartList);\n  }catch(e){\n    return {}\n  }\n}\n\nexport default createStore({\n  state: {\n    cartList: getLocalCartList()\n    // cartList: {\n    // shopId: {\n    // shopName：沃尔玛\n    // productList:{\n    //   productId: {\n    //     _id: \"1\",\n    //     name: \"番茄 250g / 份\",\n    //     imgUrl: \"http://www.dell-lee.com/imgs/vue3/tomato.png\",\n    //     sales: 10,\n    //     price: 33.6,\n    //     oldPrice: 39.6,\n    //     count:1,\n    //   }\n    // },\n    //     }\n    // }\n  },\n  mutations: {\n    changeCartItemInfo(state, payload) {\n      //获取到传递过来的商铺id，里面的商品id，商品详情\n      const { shopId, productId, productInfo, num } = payload;\n\n      let shopInfo = state.cartList[shopId] || {\n        shopName: \"\", productList: {}\n      };\n      let product = shopInfo.productList[productId];\n      if (!product) {\n        productInfo.count = 0;\n        product = productInfo\n      }\n      product.count += num;\n      if (num > 0) { product.check = true }\n      if (product.count < 0) { product.count = 0 };\n      //把商品信息添加到空的shopInfo中\n      shopInfo.productList[productId] = product;\n      //把店铺和商品信息都添加到store中\n      state.cartList[shopId] = shopInfo;\n      setLocalCartList(state)\n    },\n\n    changeShopName(state, payload) {\n      const { shopId, shopName } = payload;\n      const shopInfo = state.cartList[shopId] || { shopName: \"\", product: {} }\n      shopInfo.shopName = shopName\n      state.cartList[shopId] = shopInfo\n      setLocalCartList(state)\n    },\n\n    changeCartItemChecked(state, payload) {\n      const { shopId, productId } = payload\n      const product = state.cartList[shopId].productList[productId]\n      product.check = !product.check\n      setLocalCartList(state)\n    },\n    cleanCartProducts(state, payload) {\n      const { shopId } = payload;\n      state.cartList[shopId].productList = {}\n      setLocalCartList(state)\n    },\n    setCartItemsChecked(state, payload) {\n      const { shopId } = payload;\n      const products = state.cartList[shopId].productList;\n      if (products) {\n        for (const key in products) {\n          const product = products[key]\n          product.check = true;\n        }\n      }\n      setLocalCartList(state)\n    },\n    clearCartData(state, shopId) {\n      state.cartList[shopId].productList = {}\n    }\n  },\n  actions: {\n  },\n  modules: {\n  }\n\n})\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAGlC,MAAMC,gBAAgB,GAAIC,KAAK,IAAK;EAClC,MAAM;IAAEC;EAAS,CAAC,GAAGD,KAAK;EAC1B,MAAME,cAAc,GAAGC,IAAI,CAACC,SAAS,CAACH,QAAQ,CAAC;EAC/CI,YAAY,CAACJ,QAAQ,GAAGC,cAAc;AACxC,CAAC;AAED,MAAMI,gBAAgB,GAAGA,CAAA,KAAM;EAC7B,IAAI;IACF,OAAOH,IAAI,CAACI,KAAK,CAACF,YAAY,CAACJ,QAAQ,CAAC;EAC1C,CAAC,QAAMO,CAAC,EAAC;IACP,OAAO,CAAC,CAAC;EACX;AACF,CAAC;AAED,eAAeV,WAAW,CAAC;EACzBE,KAAK,EAAE;IACLC,QAAQ,EAAEK,gBAAgB;IAC1B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACF,CAAC;;EACDG,SAAS,EAAE;IACTC,kBAAkBA,CAACV,KAAK,EAAEW,OAAO,EAAE;MACjC;MACA,MAAM;QAAEC,MAAM;QAAEC,SAAS;QAAEC,WAAW;QAAEC;MAAI,CAAC,GAAGJ,OAAO;MAEvD,IAAIK,QAAQ,GAAGhB,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,IAAI;QACvCK,QAAQ,EAAE,EAAE;QAAEC,WAAW,EAAE,CAAC;MAC9B,CAAC;MACD,IAAIC,OAAO,GAAGH,QAAQ,CAACE,WAAW,CAACL,SAAS,CAAC;MAC7C,IAAI,CAACM,OAAO,EAAE;QACZL,WAAW,CAACM,KAAK,GAAG,CAAC;QACrBD,OAAO,GAAGL,WAAW;MACvB;MACAK,OAAO,CAACC,KAAK,IAAIL,GAAG;MACpB,IAAIA,GAAG,GAAG,CAAC,EAAE;QAAEI,OAAO,CAACE,KAAK,GAAG,IAAI;MAAC;MACpC,IAAIF,OAAO,CAACC,KAAK,GAAG,CAAC,EAAE;QAAED,OAAO,CAACC,KAAK,GAAG,CAAC;MAAC;MAAC;MAC5C;MACAJ,QAAQ,CAACE,WAAW,CAACL,SAAS,CAAC,GAAGM,OAAO;MACzC;MACAnB,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,GAAGI,QAAQ;MACjCjB,gBAAgB,CAACC,KAAK,CAAC;IACzB,CAAC;IAEDsB,cAAcA,CAACtB,KAAK,EAAEW,OAAO,EAAE;MAC7B,MAAM;QAAEC,MAAM;QAAEK;MAAS,CAAC,GAAGN,OAAO;MACpC,MAAMK,QAAQ,GAAGhB,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,IAAI;QAAEK,QAAQ,EAAE,EAAE;QAAEE,OAAO,EAAE,CAAC;MAAE,CAAC;MACxEH,QAAQ,CAACC,QAAQ,GAAGA,QAAQ;MAC5BjB,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,GAAGI,QAAQ;MACjCjB,gBAAgB,CAACC,KAAK,CAAC;IACzB,CAAC;IAEDuB,qBAAqBA,CAACvB,KAAK,EAAEW,OAAO,EAAE;MACpC,MAAM;QAAEC,MAAM;QAAEC;MAAU,CAAC,GAAGF,OAAO;MACrC,MAAMQ,OAAO,GAAGnB,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,CAACM,WAAW,CAACL,SAAS,CAAC;MAC7DM,OAAO,CAACE,KAAK,GAAG,CAACF,OAAO,CAACE,KAAK;MAC9BtB,gBAAgB,CAACC,KAAK,CAAC;IACzB,CAAC;IACDwB,iBAAiBA,CAACxB,KAAK,EAAEW,OAAO,EAAE;MAChC,MAAM;QAAEC;MAAO,CAAC,GAAGD,OAAO;MAC1BX,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,CAACM,WAAW,GAAG,CAAC,CAAC;MACvCnB,gBAAgB,CAACC,KAAK,CAAC;IACzB,CAAC;IACDyB,mBAAmBA,CAACzB,KAAK,EAAEW,OAAO,EAAE;MAClC,MAAM;QAAEC;MAAO,CAAC,GAAGD,OAAO;MAC1B,MAAMe,QAAQ,GAAG1B,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,CAACM,WAAW;MACnD,IAAIQ,QAAQ,EAAE;QACZ,KAAK,MAAMC,GAAG,IAAID,QAAQ,EAAE;UAC1B,MAAMP,OAAO,GAAGO,QAAQ,CAACC,GAAG,CAAC;UAC7BR,OAAO,CAACE,KAAK,GAAG,IAAI;QACtB;MACF;MACAtB,gBAAgB,CAACC,KAAK,CAAC;IACzB,CAAC;IACD4B,aAAaA,CAAC5B,KAAK,EAAEY,MAAM,EAAE;MAC3BZ,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,CAACM,WAAW,GAAG,CAAC,CAAC;IACzC;EACF,CAAC;EACDW,OAAO,EAAE,CACT,CAAC;EACDC,OAAO,EAAE,CACT;AAEF,CAAC,CAAC"}]}