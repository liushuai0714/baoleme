{"remainingRequest":"/Users/liushuai/Desktop/jingdong/node_modules/thread-loader/dist/cjs.js!/Users/liushuai/Desktop/jingdong/node_modules/babel-loader/lib/index.js!/Users/liushuai/Desktop/jingdong/node_modules/eslint-loader/index.js??ref--14-0!/Users/liushuai/Desktop/jingdong/src/effects/cartEffects.js","dependencies":[{"path":"/Users/liushuai/Desktop/jingdong/src/effects/cartEffects.js","mtime":1678190993372},{"path":"/Users/liushuai/Desktop/jingdong/babel.config.js","mtime":1677648653010},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/thread-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/babel-loader/lib/index.js","mtime":1677648644634},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/eslint-loader/index.js","mtime":1677648643957}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICJ2dWUiOwovL+i0reeJqei9puebuOWFs+mAu+i+kQpleHBvcnQgY29uc3QgdXNlQ29tbW9uQ2FydEVmZmVjdCA9IHNob3BJZCA9PiB7CiAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSgpOwogIGNvbnN0IGNhcnRMaXN0ID0gc3RvcmUuc3RhdGUuY2FydExpc3Q7CiAgY29uc3QgY2hhbmdlQ2FydEl0ZW1JbmZvID0gKHNob3BJZCwgcHJvZHVjdElkLCBwcm9kdWN0SW5mbywgbnVtKSA9PiB7CiAgICBzdG9yZS5jb21taXQoJ2NoYW5nZUNhcnRJdGVtSW5mbycsIHsKICAgICAgc2hvcElkLAogICAgICBwcm9kdWN0SWQsCiAgICAgIHByb2R1Y3RJbmZvLAogICAgICBudW0KICAgIH0pOwogIH07CiAgY29uc3QgcHJvZHVjdExpc3QgPSBjb21wdXRlZCgoKSA9PiB7CiAgICB2YXIgX2NhcnRMaXN0JHNob3BJZDsKICAgIGNvbnN0IHByb2R1Y3RMaXN0ID0gKChfY2FydExpc3Qkc2hvcElkID0gY2FydExpc3Rbc2hvcElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHNob3BJZC5wcm9kdWN0TGlzdCkgfHwge307CiAgICBjb25zdCBub3RFbXB0eVByb2R1Y3RMaXN0ID0ge307CiAgICBmb3IgKGxldCBpIGluIHByb2R1Y3RMaXN0KSB7CiAgICAgIGNvbnN0IHByb2R1Y3QgPSBwcm9kdWN0TGlzdFtpXTsKICAgICAgaWYgKHByb2R1Y3QuY291bnQgPiAwKSB7CiAgICAgICAgbm90RW1wdHlQcm9kdWN0TGlzdFtpXSA9IHByb2R1Y3Q7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBwcm9kdWN0TGlzdDsKICB9KTsKICBjb25zdCBzaG9wTmFtZSA9IGNvbXB1dGVkKCgpID0+IHsKICAgIHZhciBfY2FydExpc3Qkc2hvcElkMjsKICAgIGNvbnN0IHNob3BOYW1lID0gKChfY2FydExpc3Qkc2hvcElkMiA9IGNhcnRMaXN0W3Nob3BJZF0pID09PSBudWxsIHx8IF9jYXJ0TGlzdCRzaG9wSWQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3Qkc2hvcElkMi5zaG9wTmFtZSkgfHwgIiI7CiAgICByZXR1cm4gc2hvcE5hbWU7CiAgfSk7CiAgY29uc3QgY2FsY3VsYXRpb25zID0gY29tcHV0ZWQoKCkgPT4gewogICAgdmFyIF9jYXJ0TGlzdCRzaG9wSWQzOwogICAgY29uc3QgcHJvZHVjdExpc3QgPSAoX2NhcnRMaXN0JHNob3BJZDMgPSBjYXJ0TGlzdFtzaG9wSWRdKSA9PT0gbnVsbCB8fCBfY2FydExpc3Qkc2hvcElkMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHNob3BJZDMucHJvZHVjdExpc3Q7CiAgICBjb25zdCByZXN1bHQgPSB7CiAgICAgIHRvdGFsOiAwLAogICAgICBwcmljZTogMCwKICAgICAgYWxsQ2hlY2tlZDogdHJ1ZQogICAgfTsKICAgIGlmIChwcm9kdWN0TGlzdCkgewogICAgICBmb3IgKGNvbnN0IGkgaW4gcHJvZHVjdExpc3QpIHsKICAgICAgICBjb25zdCBwcm9kdWN0ID0gcHJvZHVjdExpc3RbaV07CiAgICAgICAgcmVzdWx0LnRvdGFsICs9IHByb2R1Y3QuY291bnQ7CiAgICAgICAgaWYgKHByb2R1Y3QuY2hlY2spIHsKICAgICAgICAgIHJlc3VsdC5wcmljZSArPSBwcm9kdWN0LmNvdW50ICogcHJvZHVjdC5wcmljZTsKICAgICAgICB9CiAgICAgICAgaWYgKHByb2R1Y3QuY291bnQgPiAwICYmICFwcm9kdWN0LmNoZWNrKSB7CiAgICAgICAgICByZXN1bHQuYWxsQ2hlY2tlZCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmVzdWx0LnByaWNlID0gcmVzdWx0LnByaWNlLnRvRml4ZWQoMik7CiAgICByZXR1cm4gcmVzdWx0OwogIH0pOwogIHJldHVybiB7CiAgICBjaGFuZ2VDYXJ0SXRlbUluZm8sCiAgICBjYXJ0TGlzdCwKICAgIHByb2R1Y3RMaXN0LAogICAgc2hvcE5hbWUsCiAgICBjYWxjdWxhdGlvbnMKICB9Owp9Ow=="},{"version":3,"names":["useStore","computed","useCommonCartEffect","shopId","store","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","_cartList$shopId","notEmptyProductList","i","product","count","shopName","_cartList$shopId2","calculations","_cartList$shopId3","result","total","price","allChecked","check","toFixed"],"sources":["/Users/liushuai/Desktop/jingdong/src/effects/cartEffects.js"],"sourcesContent":["import { useStore } from \"vuex\";\nimport { computed } from \"vue\";\n //购物车相关逻辑\n export const useCommonCartEffect = (shopId) => {\n  const store = useStore();\n  const cartList = store.state.cartList\n  const changeCartItemInfo = (shopId, productId, productInfo, num) =>{\n    store.commit('changeCartItemInfo', {shopId, productId, productInfo, num})\n  }\n  const productList = computed(() => {\n    const productList = cartList[shopId]?.productList || {};\n    const notEmptyProductList = {}\n    for (let i in productList) {\n      const product = productList[i]\n        if(product.count > 0) {\n          notEmptyProductList[i] = product\n        }\n    }\n    return productList;\n  });\n\n  const shopName = computed(()=>{\n    const shopName = cartList[shopId]?.shopName ||\"\"\n    return shopName\n  })\n  const calculations = computed(()=>{\n    const productList = cartList[shopId]?.productList;\n    const result = { total:0, price:0, allChecked:true}\n    if (productList) {\n      for (const i in productList) {\n        const product = productList[i];\n        result.total += product.count;\n        if (product.check) {\n          result.price += (product.count * product.price);\n        }\n        if (product.count > 0 && !product.check) {\n          result.allChecked = false;\n        }\n      }\n    }\n    result.price = result.price.toFixed(2)\n    return result\n  })\n  return { changeCartItemInfo, cartList, productList, shopName, calculations};\n};"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,MAAM;AAC/B,SAASC,QAAQ,QAAQ,KAAK;AAC7B;AACA,OAAO,MAAMC,mBAAmB,GAAIC,MAAM,IAAK;EAC9C,MAAMC,KAAK,GAAGJ,QAAQ,EAAE;EACxB,MAAMK,QAAQ,GAAGD,KAAK,CAACE,KAAK,CAACD,QAAQ;EACrC,MAAME,kBAAkB,GAAGA,CAACJ,MAAM,EAAEK,SAAS,EAAEC,WAAW,EAAEC,GAAG,KAAI;IACjEN,KAAK,CAACO,MAAM,CAAC,oBAAoB,EAAE;MAACR,MAAM;MAAEK,SAAS;MAAEC,WAAW;MAAEC;IAAG,CAAC,CAAC;EAC3E,CAAC;EACD,MAAME,WAAW,GAAGX,QAAQ,CAAC,MAAM;IAAA,IAAAY,gBAAA;IACjC,MAAMD,WAAW,GAAG,EAAAC,gBAAA,GAAAR,QAAQ,CAACF,MAAM,CAAC,cAAAU,gBAAA,uBAAhBA,gBAAA,CAAkBD,WAAW,KAAI,CAAC,CAAC;IACvD,MAAME,mBAAmB,GAAG,CAAC,CAAC;IAC9B,KAAK,IAAIC,CAAC,IAAIH,WAAW,EAAE;MACzB,MAAMI,OAAO,GAAGJ,WAAW,CAACG,CAAC,CAAC;MAC5B,IAAGC,OAAO,CAACC,KAAK,GAAG,CAAC,EAAE;QACpBH,mBAAmB,CAACC,CAAC,CAAC,GAAGC,OAAO;MAClC;IACJ;IACA,OAAOJ,WAAW;EACpB,CAAC,CAAC;EAEF,MAAMM,QAAQ,GAAGjB,QAAQ,CAAC,MAAI;IAAA,IAAAkB,iBAAA;IAC5B,MAAMD,QAAQ,GAAG,EAAAC,iBAAA,GAAAd,QAAQ,CAACF,MAAM,CAAC,cAAAgB,iBAAA,uBAAhBA,iBAAA,CAAkBD,QAAQ,KAAG,EAAE;IAChD,OAAOA,QAAQ;EACjB,CAAC,CAAC;EACF,MAAME,YAAY,GAAGnB,QAAQ,CAAC,MAAI;IAAA,IAAAoB,iBAAA;IAChC,MAAMT,WAAW,IAAAS,iBAAA,GAAGhB,QAAQ,CAACF,MAAM,CAAC,cAAAkB,iBAAA,uBAAhBA,iBAAA,CAAkBT,WAAW;IACjD,MAAMU,MAAM,GAAG;MAAEC,KAAK,EAAC,CAAC;MAAEC,KAAK,EAAC,CAAC;MAAEC,UAAU,EAAC;IAAI,CAAC;IACnD,IAAIb,WAAW,EAAE;MACf,KAAK,MAAMG,CAAC,IAAIH,WAAW,EAAE;QAC3B,MAAMI,OAAO,GAAGJ,WAAW,CAACG,CAAC,CAAC;QAC9BO,MAAM,CAACC,KAAK,IAAIP,OAAO,CAACC,KAAK;QAC7B,IAAID,OAAO,CAACU,KAAK,EAAE;UACjBJ,MAAM,CAACE,KAAK,IAAKR,OAAO,CAACC,KAAK,GAAGD,OAAO,CAACQ,KAAM;QACjD;QACA,IAAIR,OAAO,CAACC,KAAK,GAAG,CAAC,IAAI,CAACD,OAAO,CAACU,KAAK,EAAE;UACvCJ,MAAM,CAACG,UAAU,GAAG,KAAK;QAC3B;MACF;IACF;IACAH,MAAM,CAACE,KAAK,GAAGF,MAAM,CAACE,KAAK,CAACG,OAAO,CAAC,CAAC,CAAC;IACtC,OAAOL,MAAM;EACf,CAAC,CAAC;EACF,OAAO;IAAEf,kBAAkB;IAAEF,QAAQ;IAAEO,WAAW;IAAEM,QAAQ;IAAEE;EAAY,CAAC;AAC7E,CAAC"}]}