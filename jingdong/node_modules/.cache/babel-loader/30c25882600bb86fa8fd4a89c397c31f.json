{"remainingRequest":"/Users/liushuai/Desktop/jingdong/node_modules/thread-loader/dist/cjs.js!/Users/liushuai/Desktop/jingdong/node_modules/babel-loader/lib/index.js!/Users/liushuai/Desktop/jingdong/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/liushuai/Desktop/jingdong/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/liushuai/Desktop/jingdong/src/views/login/Login.vue?vue&type=template&id=4e303fbc&scoped=true","dependencies":[{"path":"/Users/liushuai/Desktop/jingdong/src/views/login/Login.vue","mtime":1678326187518},{"path":"/Users/liushuai/Desktop/jingdong/babel.config.js","mtime":1677648653010},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/thread-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/babel-loader/lib/index.js","mtime":1677648644634},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1677648645111},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/vue-loader-v16/dist/index.js","mtime":1677648644623}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHZNb2RlbFRleHQgYXMgX3ZNb2RlbFRleHQsIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7CmNvbnN0IF93aXRoU2NvcGVJZCA9IG4gPT4gKF9wdXNoU2NvcGVJZCgiZGF0YS12LTRlMzAzZmJjIiksIG4gPSBuKCksIF9wb3BTY29wZUlkKCksIG4pOwpjb25zdCBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAid3JhcHBlciIKfTsKY29uc3QgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoKCkgPT4gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImltZyIsIHsKICBzcmM6ICJodHRwOi8vd3d3LmRlbGwtbGVlLmNvbS9pbWdzL3Z1ZTMvdXNlci5wbmciLAogIGFsdDogIiIsCiAgY2xhc3M6ICJ3cmFwcGVyX19pbWciCn0sIG51bGwsIC0xKSk7CmNvbnN0IF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJ3cmFwcGVyX19pbnB1dCIKfTsKY29uc3QgX2hvaXN0ZWRfNCA9IHsKICBjbGFzczogIndyYXBwZXJfX2lucHV0Igp9Owpjb25zdCBfaG9pc3RlZF81ID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgoKSA9PiAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogIGNsYXNzOiAid3JhcHBlcl9fbG9naW4tbGluayIKfSwgIueri+WNs+azqOWGjCIsIC0xKSk7CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgY29uc3QgX2NvbXBvbmVudF9yb3V0ZXJfbGluayA9IF9yZXNvbHZlQ29tcG9uZW50KCJyb3V0ZXItbGluayIpOwogIGNvbnN0IF9jb21wb25lbnRfVG9hc3QgPSBfcmVzb2x2ZUNvbXBvbmVudCgiVG9hc3QiKTsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2hvaXN0ZWRfMiwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMywgW193aXRoRGlyZWN0aXZlcyhfY3JlYXRlRWxlbWVudFZOb2RlKCJpbnB1dCIsIHsKICAgIHR5cGU6ICJ0ZXh0IiwKICAgIGNsYXNzOiAid3JhcHBlcl9faW5wdXRfX2NvbnRlbnQiLAogICAgcGxhY2Vob2xkZXI6ICLor7fovpPlhaXnlKjmiLflkI0iLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9ICRldmVudCA9PiAkc2V0dXAudXNlcm5hbWUgPSAkZXZlbnQpCiAgfSwgbnVsbCwgNTEyKSwgW1tfdk1vZGVsVGV4dCwgJHNldHVwLnVzZXJuYW1lXV0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFtfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAicGFzc3dvcmQiLAogICAgY2xhc3M6ICJ3cmFwcGVyX19pbnB1dF9fY29udGVudCIsCiAgICBwbGFjZWhvbGRlcjogIuivt+i+k+WFpeWvhueggSIsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gJGV2ZW50ID0+ICRzZXR1cC5wYXNzd29yZCA9ICRldmVudCksCiAgICBhdXRvY29tcGxldGU6ICJuZXctcGFzc3dvcmQiCiAgfSwgbnVsbCwgNTEyKSwgW1tfdk1vZGVsVGV4dCwgJHNldHVwLnBhc3N3b3JkXV0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICAgIGNsYXNzOiAid3JhcHBlcl9fbG9naW4tYnV0dG9uIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gKC4uLmFyZ3MpID0+ICRzZXR1cC5oYW5kbGVMb2dpbiAmJiAkc2V0dXAuaGFuZGxlTG9naW4oLi4uYXJncykpCiAgfSwgIueZu+W9lSIpLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9yb3V0ZXJfbGluaywgewogICAgdG86IHsKICAgICAgbmFtZTogJ1JlZ2lzdGVyJwogICAgfQogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfaG9pc3RlZF81XSksCiAgICBfOiAxCiAgfSksICRzZXR1cC5zaG93ID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfVG9hc3QsIHsKICAgIGtleTogMCwKICAgIG1lc3NhZ2U6ICRzZXR1cC50b2FzdE1lc3NhZ2UKICB9LCBudWxsLCA4LCBbIm1lc3NhZ2UiXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSldKTsKfQ=="},{"version":3,"names":["class","_createElementVNode","src","alt","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","type","placeholder","$setup","username","$event","_hoisted_4","password","autocomplete","onClick","_cache","args","handleLogin","_createVNode","_component_router_link","to","name","_hoisted_5","show","_createBlock","_component_Toast","message","toastMessage"],"sources":["/Users/liushuai/Desktop/jingdong/src/views/login/Login.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <img\n      src=\"http://www.dell-lee.com/imgs/vue3/user.png\"\n      alt=\"\"\n      class=\"wrapper__img\"\n    />\n    <div class=\"wrapper__input\">\n      <input\n        type=\"text\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入用户名\"\n        v-model=\"username\"\n      />\n    </div>\n    <!-- 不自动填充密码 autocomplete=\"new-password\"-->\n    <div class=\"wrapper__input\">\n      <input\n        type=\"password\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入密码\"\n        v-model=\"password\"\n        autocomplete=\"new-password\"\n      />\n    </div>\n    <div class=\"wrapper__login-button\" @click=\"handleLogin\">登录</div>\n    <router-link :to=\"{ name: 'Register' }\">\n      <div class=\"wrapper__login-link\">立即注册</div>\n    </router-link>\n    <Toast v-if=\"show\" :message=\"toastMessage\" />\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { post } from \"../../utils/request\";\nimport Toast, { useToastEffect } from \"../../components/Toast\";\n\nconst useLoginEffect = (showToast) => {\n  const router = useRouter();\n  const data = reactive({ username: \"\", password: \"\" });\n\n  const handleLogin = async () => {\n    const {username, password} = data;\n    if (!username || !password) {\n      return showToast(\"用户名和密码不能为空！\")\n    }\n    try {\n      const result = await post(\"/api/user/login\", {\n        username: data.username,\n        password: data.password,\n      });\n      if (result?.errno === 0) {\n        localStorage.isLogin = true;\n        router.push({ name: \"Home\" });\n      } else {\n        showToast(\"登录失败\");\n      }\n    } catch (e) {\n      showToast(\"请求失败\");\n    }\n  };\n  const { username, password } = toRefs(data);\n  return { username, password, handleLogin };\n};\n\nexport default {\n  name: \"Login\",\n  components: { Toast },\n  //职责就是告诉你，代码执行的一个过程\n  setup() {\n    const { show, toastMessage, showToast } = useToastEffect();\n    const { username, password, handleLogin } = useLoginEffect(showToast);\n    return { handleLogin, username, password, show, toastMessage };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../style/viriables.scss\";\n.wrapper {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  transform: translateY(-50%);\n  &__img {\n    display: block;\n    width: 0.66rem;\n    height: 0.66rem;\n    margin: 0 auto 0.4rem;\n  }\n  &__input {\n    padding: 0 0.16rem;\n    box-sizing: border-box;\n    height: 0.48rem;\n    margin: 0 0.4rem 0.16rem;\n    background-color: #f9f9f9;\n    border: 0.01rem solid rgba(0, 0, 0, 0.1);\n    border-radius: 0.06rem;\n    border-radius: 0.06rem;\n    &__content {\n      margin-top: .11rem;\n      line-height: 0.22rem;\n      border: none;\n      outline: none;\n      width: 100%;\n      background: none;\n      font-size: 0.16rem;\n      color:$content-notice-fontColor;\n      &::placeholder {\n        font-size: .16rem;\n        color: $content-notice-fontColor;\n        letter-spacing: 0;\n        line-height: .24rem;\n      }\n    }\n  }\n  &__login-button {\n    background-color: $btn-bgColor;\n    box-shadow: 0 0.04rem 0.08rem 0 rgba(0, 145, 255, 0.32);\n    height: 0.48rem;\n    margin: 0.32rem 0.4rem 0.16rem;\n    border-radius: 0.04rem;\n    font-size: 0.16rem;\n    line-height: 0.48rem;\n    color: $bg-color;\n    text-align: center;\n  }\n  &__login-link {\n    font-size: 0.14rem;\n    color:$content-notice-fontColor;\n    text-align: center;\n  }\n}\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAS;gEAClBC,mBAAA,CAIE;EAHAC,GAAG,EAAC,4CAA4C;EAChDC,GAAG,EAAC,EAAE;EACNH,KAAK,EAAC;;;EAEHA,KAAK,EAAC;AAAgB;;EAStBA,KAAK,EAAC;AAAgB;gEAWzBC,mBAAA,CAA2C;EAAtCD,KAAK,EAAC;AAAqB,GAAC,MAAI;;;;uBA1BzCI,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJC,UAIE,EACFL,mBAAA,CAOM,OAPNM,UAOM,G,gBANJN,mBAAA,CAKE;IAJAO,IAAI,EAAC,MAAM;IACXR,KAAK,EAAC,yBAAyB;IAC/BS,WAAW,EAAC,QAAQ;+DACXC,MAAA,CAAAC,QAAQ,GAAAC,MAAA;gCAARF,MAAA,CAAAC,QAAQ,E,KAIrBV,mBAAA,CAQM,OARNY,UAQM,G,gBAPJZ,mBAAA,CAME;IALAO,IAAI,EAAC,UAAU;IACfR,KAAK,EAAC,yBAAyB;IAC/BS,WAAW,EAAC,OAAO;+DACVC,MAAA,CAAAI,QAAQ,GAAAF,MAAA;IACjBG,YAAY,EAAC;gCADJL,MAAA,CAAAI,QAAQ,E,KAIrBb,mBAAA,CAAgE;IAA3DD,KAAK,EAAC,uBAAuB;IAAEgB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAER,MAAA,CAAAS,WAAA,IAAAT,MAAA,CAAAS,WAAA,IAAAD,IAAA,CAAW;KAAE,IAAE,GAC1DE,YAAA,CAEcC,sBAAA;IAFAC,EAAE,EAAE;MAAAC,IAAA;IAAA;EAAoB;sBACpC,MAA2C,CAA3CC,UAA2C,C;;MAEhCd,MAAA,CAAAe,IAAI,I,cAAjBC,YAAA,CAA6CC,gBAAA;;IAAzBC,OAAO,EAAElB,MAAA,CAAAmB"}]}