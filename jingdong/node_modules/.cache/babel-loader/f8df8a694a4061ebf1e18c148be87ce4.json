{"remainingRequest":"/Users/liushuai/Desktop/jingdong/node_modules/babel-loader/lib/index.js!/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/liushuai/Desktop/jingdong/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/liushuai/Desktop/jingdong/src/views/register/Register.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liushuai/Desktop/jingdong/src/views/register/Register.vue","mtime":1677761546149},{"path":"/Users/liushuai/Desktop/jingdong/babel.config.js","mtime":1677648653010},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/babel-loader/lib/index.js","mtime":1677648644634},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/vue-loader-v16/dist/index.js","mtime":1677648644623}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IHJlYWN0aXZlLCB0b1JlZnMgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IHsgcG9zdCB9IGZyb20gIi4uLy4uL3V0aWxzL3JlcXVlc3QiOwppbXBvcnQgVG9hc3QsIHsgdXNlVG9hc3RFZmZlY3QgfSBmcm9tICIuLi8uLi9jb21wb25lbnRzL1RvYXN0IjsKCi8v5rOo5YaM55u45YWz6YC76L6RCmNvbnN0IHVzZVJlZ2lzdGVyRWZmZWN0ID0gc2hvd1RvYXN0ID0+IHsKICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICBjb25zdCBkYXRhID0gcmVhY3RpdmUoewogICAgdXNlcm5hbWU6ICIiLAogICAgcGFzc3dvcmQ6ICIiLAogICAgZW5zdXJlbWVudDogIiIKICB9KTsKICBjb25zdCBoYW5kbGVSZWdpc3RlciA9IGFzeW5jICgpID0+IHsKICAgIGNvbnN0IHsKICAgICAgdXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkLAogICAgICBlbnN1cmVtZW50CiAgICB9ID0gZGF0YTsKICAgIGlmICghdXNlcm5hbWUgfHwgIXBhc3N3b3JkIHx8ICFlbnN1cmVtZW50KSByZXR1cm4gc2hvd1RvYXN0KCLnlKjmiLflkI3lr4bnoIHnoa7orqTlr4bnoIHkuI3og73kuLrnqbrvvIEiKTsKICAgIGlmIChwYXNzd29yZCAhPT0gZW5zdXJlbWVudCkgcmV0dXJuIHNob3dUb2FzdCgi5a+G56CB56Gu6K6k5LiN5LiA6Ie077yBIik7CiAgICB0cnkgewogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb3N0KCIvYXBpL3VzZXIvcmVnaXN0ZXIiLCB7CiAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IGRhdGEucGFzc3dvcmQKICAgICAgfSk7CiAgICAgIGlmICgocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LmVycm5vKSA9PT0gMCkgewogICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJMb2dpbiIKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzaG93VG9hc3QoIuazqOWGjOWksei0pSIpOwogICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHNob3dUb2FzdCgi6K+35rGC5aSx6LSlIik7CiAgICB9CiAgfTsKICBjb25zdCB7CiAgICB1c2VybmFtZSwKICAgIHBhc3N3b3JkLAogICAgZW5zdXJlbWVudAogIH0gPSB0b1JlZnMoZGF0YSk7CiAgcmV0dXJuIHsKICAgIHVzZXJuYW1lLAogICAgcGFzc3dvcmQsCiAgICBlbnN1cmVtZW50LAogICAgaGFuZGxlUmVnaXN0ZXIKICB9Owp9Owpjb25zdCB1c2VUb0xvZ2luRWZmZWN0ID0gKCkgPT4gewogIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpOwogIGNvbnN0IGhhbmRsZVRvTG9naW4gPSAoKSA9PiB7CiAgICByb3V0ZXIucHVzaCh7CiAgICAgIG5hbWU6ICJMb2dpbiIKICAgIH0pOwogIH07CiAgcmV0dXJuIHsKICAgIGhhbmRsZVRvTG9naW4KICB9Owp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJlZ2lzdGVyIiwKICBjb21wb25lbnRzOiB7CiAgICBUb2FzdAogIH0sCiAgc2V0dXAoKSB7CiAgICBjb25zdCB7CiAgICAgIHNob3csCiAgICAgIHRvYXN0TWVzc2FnZSwKICAgICAgc2hvd1RvYXN0CiAgICB9ID0gdXNlVG9hc3RFZmZlY3QoKTsKICAgIGNvbnN0IHsKICAgICAgdXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkLAogICAgICBlbnN1cmVtZW50LAogICAgICBoYW5kbGVSZWdpc3RlcgogICAgfSA9IHVzZVJlZ2lzdGVyRWZmZWN0KHNob3dUb2FzdCk7CiAgICBjb25zdCB7CiAgICAgIGhhbmRsZVRvTG9naW4KICAgIH0gPSB1c2VUb0xvZ2luRWZmZWN0KCk7CiAgICByZXR1cm4gewogICAgICBoYW5kbGVSZWdpc3RlciwKICAgICAgaGFuZGxlVG9Mb2dpbiwKICAgICAgdXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkLAogICAgICBlbnN1cmVtZW50LAogICAgICBzaG93VG9hc3QsCiAgICAgIHNob3csCiAgICAgIHRvYXN0TWVzc2FnZQogICAgfTsKICB9Cn07"},{"version":3,"names":["reactive","toRefs","useRouter","post","Toast","useToastEffect","useRegisterEffect","showToast","router","data","username","password","ensurement","handleRegister","result","email","errno","push","name","e","useToLoginEffect","handleToLogin","components","setup","show","toastMessage"],"sources":["/Users/liushuai/Desktop/jingdong/src/views/register/Register.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <img\n      src=\"http://www.dell-lee.com/imgs/vue3/user.png\"\n      alt=\"\"\n      class=\"wrapper__img\"\n    />\n    <div class=\"wrapper__input\">\n      <input\n        type=\"text\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入用户名\"\n        v-model=\"username\"\n      />\n    </div>\n    <div class=\"wrapper__input\">\n      <input\n        type=\"password\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入密码\"\n        autocomplete=\"new-password\"\n        v-model=\"password\"\n      />\n    </div>\n    <div class=\"wrapper__input\">\n      <input\n        type=\"password\"\n        class=\"wrapper__input__content\"\n        id=\"wrapper__input__content\"\n        placeholder=\"确认密码\"\n        v-model=\"ensurement\"\n      />\n    </div>\n    <div class=\"wrapper__register-button\" @click=\"handleRegister\">注册</div>\n    <div class=\"wrapper__register-link\" @click=\"handleToLogin\">\n      已有账号去登录\n    </div>\n    <Toast v-if=\"show\" :message=\"toastMessage\" />\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { post } from \"../../utils/request\";\nimport Toast, { useToastEffect } from \"../../components/Toast\";\n\n//注册相关逻辑\nconst useRegisterEffect = (showToast) => {\n  const router = useRouter();\n  const data = reactive({\n    username: \"\",\n    password: \"\",\n    ensurement: \"\",\n  });\n\n  const handleRegister = async () => {\n    const {username, password, ensurement} = data;\n    if (!username || !password || !ensurement) return showToast(\"用户名密码确认密码不能为空！\");\n    if (password !== ensurement) return showToast(\"密码确认不一致！\");\n    try {\n      const result = await post(\"/api/user/register\", {\n        email: data.email,\n        password: data.password,\n      });\n      if (result?.errno === 0) {\n        router.push({ name: \"Login\" });\n      } else {\n        showToast(\"注册失败\");\n      }\n    } catch (e) {\n      showToast(\"请求失败\");\n    }\n  };\n  const { username, password, ensurement } = toRefs(data);\n  return { username, password, ensurement, handleRegister };\n};\n\nconst useToLoginEffect = () => {\n  const router = useRouter();\n  const handleToLogin = () => {\n    router.push({ name: \"Login\" });\n  };\n  return { handleToLogin };\n};\n\nexport default {\n  name: \"Register\",\n  components: { Toast },\n  setup() {\n    const { show, toastMessage, showToast } = useToastEffect();\n    const { username, password, ensurement, handleRegister } =\n      useRegisterEffect(showToast);\n    const { handleToLogin } = useToLoginEffect();\n    return {\n      handleRegister,\n      handleToLogin,\n      username,\n      password,\n      ensurement,\n      showToast,\n      show,\n      toastMessage,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../style/viriables.scss\";\n.wrapper {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  transform: translateY(-50%);\n  &__img {\n    display: block;\n    width: 0.66rem;\n    height: 0.66rem;\n    margin: 0 auto 0.4rem;\n  }\n  &__input {\n    padding: 0 0.16rem;\n    box-sizing: border-box;\n    height: 0.48rem;\n    margin: 0 0.4rem 0.16rem;\n    background-color: #f9f9f9;\n    border: 0.01rem solid rgba(0, 0, 0, 0.1);\n    border-radius: 0.06rem;\n    border-radius: 0.06rem;\n    &__content {\n      line-height: 0.48rem;\n      border: none;\n      outline: none;\n      width: 100%;\n      background: none;\n      font-size: 0.16rem;\n      color: #777;\n      &::placeholder {\n        font-size: 16px;\n        color: #777;\n        letter-spacing: 0;\n        line-height: 24px;\n      }\n    }\n  }\n  &__register-button {\n    background-color: #0091ff;\n    box-shadow: 0 0.04rem 0.08rem 0 rgba(0, 145, 255, 0.32);\n    height: 0.48rem;\n    margin: 0.32rem 0.4rem 0.16rem;\n    border-radius: 0.04rem;\n    font-size: 0.16rem;\n    line-height: 0.48rem;\n    color: #ffffff;\n    text-align: center;\n  }\n  &__register-link {\n    font-size: 0.14rem;\n    color: #777;\n    text-align: center;\n  }\n}\n</style>"],"mappings":";AA0CA,SAASA,QAAQ,EAAEC,MAAK,QAAS,KAAK;AACtC,SAASC,SAAQ,QAAS,YAAY;AACtC,SAASC,IAAG,QAAS,qBAAqB;AAC1C,OAAOC,KAAK,IAAIC,cAAa,QAAS,wBAAwB;;AAE9D;AACA,MAAMC,iBAAgB,GAAKC,SAAS,IAAK;EACvC,MAAMC,MAAK,GAAIN,SAAS,EAAE;EAC1B,MAAMO,IAAG,GAAIT,QAAQ,CAAC;IACpBU,QAAQ,EAAE,EAAE;IACZC,QAAQ,EAAE,EAAE;IACZC,UAAU,EAAE;EACd,CAAC,CAAC;EAEF,MAAMC,cAAa,GAAI,MAAAA,CAAA,KAAY;IACjC,MAAM;MAACH,QAAQ;MAAEC,QAAQ;MAAEC;IAAU,IAAIH,IAAI;IAC7C,IAAI,CAACC,QAAO,IAAK,CAACC,QAAO,IAAK,CAACC,UAAU,EAAE,OAAOL,SAAS,CAAC,gBAAgB,CAAC;IAC7E,IAAII,QAAO,KAAMC,UAAU,EAAE,OAAOL,SAAS,CAAC,UAAU,CAAC;IACzD,IAAI;MACF,MAAMO,MAAK,GAAI,MAAMX,IAAI,CAAC,oBAAoB,EAAE;QAC9CY,KAAK,EAAEN,IAAI,CAACM,KAAK;QACjBJ,QAAQ,EAAEF,IAAI,CAACE;MACjB,CAAC,CAAC;MACF,IAAI,CAAAG,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEE,KAAI,MAAM,CAAC,EAAE;QACvBR,MAAM,CAACS,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAQ,CAAC,CAAC;MAChC,OAAO;QACLX,SAAS,CAAC,MAAM,CAAC;MACnB;IACF,EAAE,OAAOY,CAAC,EAAE;MACVZ,SAAS,CAAC,MAAM,CAAC;IACnB;EACF,CAAC;EACD,MAAM;IAAEG,QAAQ;IAAEC,QAAQ;IAAEC;EAAW,IAAIX,MAAM,CAACQ,IAAI,CAAC;EACvD,OAAO;IAAEC,QAAQ;IAAEC,QAAQ;IAAEC,UAAU;IAAEC;EAAe,CAAC;AAC3D,CAAC;AAED,MAAMO,gBAAe,GAAIA,CAAA,KAAM;EAC7B,MAAMZ,MAAK,GAAIN,SAAS,EAAE;EAC1B,MAAMmB,aAAY,GAAIA,CAAA,KAAM;IAC1Bb,MAAM,CAACS,IAAI,CAAC;MAAEC,IAAI,EAAE;IAAQ,CAAC,CAAC;EAChC,CAAC;EACD,OAAO;IAAEG;EAAc,CAAC;AAC1B,CAAC;AAED,eAAe;EACbH,IAAI,EAAE,UAAU;EAChBI,UAAU,EAAE;IAAElB;EAAM,CAAC;EACrBmB,KAAKA,CAAA,EAAG;IACN,MAAM;MAAEC,IAAI;MAAEC,YAAY;MAAElB;IAAU,IAAIF,cAAc,EAAE;IAC1D,MAAM;MAAEK,QAAQ;MAAEC,QAAQ;MAAEC,UAAU;MAAEC;IAAe,IACrDP,iBAAiB,CAACC,SAAS,CAAC;IAC9B,MAAM;MAAEc;IAAc,IAAID,gBAAgB,EAAE;IAC5C,OAAO;MACLP,cAAc;MACdQ,aAAa;MACbX,QAAQ;MACRC,QAAQ;MACRC,UAAU;MACVL,SAAS;MACTiB,IAAI;MACJC;IACF,CAAC;EACH;AACF,CAAC"}]}