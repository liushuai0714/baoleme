{"remainingRequest":"/Users/liushuai/Desktop/jingdong/node_modules/babel-loader/lib/index.js!/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/liushuai/Desktop/jingdong/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/liushuai/Desktop/jingdong/src/views/shop/Cart.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liushuai/Desktop/jingdong/src/views/shop/Cart.vue","mtime":1679278978444},{"path":"/Users/liushuai/Desktop/jingdong/babel.config.js","mtime":1677648653010},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/babel-loader/lib/index.js","mtime":1677648644634},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/cache-loader/dist/cjs.js","mtime":1677648643805},{"path":"/Users/liushuai/Desktop/jingdong/node_modules/vue-loader-v16/dist/index.js","mtime":1677648644623}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IHsgdXNlQ29tbW9uQ2FydEVmZmVjdCB9IGZyb20gIi4uLy4uL2VmZmVjdHMvY2FydEVmZmVjdHMuanMiOwoKLy/ojrflj5botK3nianovabkv6Hmga/pgLvovpEKY29uc3QgdXNlQ2FydEVmZmVjdCA9IHNob3BJZCA9PiB7CiAgY29uc3QgewogICAgY2hhbmdlQ2FydEl0ZW1JbmZvLAogICAgcHJvZHVjdExpc3QsCiAgICBjYWxjdWxhdGlvbnMKICB9ID0gdXNlQ29tbW9uQ2FydEVmZmVjdChzaG9wSWQpOwogIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUoKTsKICBjb25zdCBjaGFuZ2VDYXJ0SXRlbUNoZWNrZWQgPSAoc2hvcElkLCBwcm9kdWN0SWQpID0+IHsKICAgIHN0b3JlLmNvbW1pdCgiY2hhbmdlQ2FydEl0ZW1DaGVja2VkIiwgewogICAgICBzaG9wSWQsCiAgICAgIHByb2R1Y3RJZAogICAgfSk7CiAgfTsKICAvL+a4heepuui0reeJqei9pgogIGNvbnN0IGNsZWFuQ2FydFByb2R1Y3RzID0gKHNob3BJZCwgc2hvd0NhcnQpID0+IHsKICAgIHN0b3JlLmNvbW1pdCgiY2xlYW5DYXJ0UHJvZHVjdHMiLCB7CiAgICAgIHNob3BJZAogICAgfSk7CiAgfTsKCiAgLy8KICBjb25zdCBzZXRDYXJ0SXRlbXNDaGVja2VkID0gc2hvcElkID0+IHsKICAgIHN0b3JlLmNvbW1pdCgic2V0Q2FydEl0ZW1zQ2hlY2tlZCIsIHsKICAgICAgc2hvcElkCiAgICB9KTsKICB9OwogIGNvbnN0IGdldEFsbGFkZHJlc3MgPSAoKSA9PiB7CiAgICBzdG9yZS5kaXNwYXRjaCgiZ2V0QWxsYWRkcmVzcyIpOwogIH07CiAgcmV0dXJuIHsKICAgIGdldEFsbGFkZHJlc3MsCiAgICBjYWxjdWxhdGlvbnMsCiAgICBwcm9kdWN0TGlzdCwKICAgIGNoYW5nZUNhcnRJdGVtSW5mbywKICAgIGNoYW5nZUNhcnRJdGVtQ2hlY2tlZCwKICAgIGNsZWFuQ2FydFByb2R1Y3RzLAogICAgc2V0Q2FydEl0ZW1zQ2hlY2tlZAogIH07Cn07CmNvbnN0IHRvZ2dsZUNhcnRFZmZlY3QgPSAoKSA9PiB7CiAgY29uc3Qgc2hvd0NhcnQgPSByZWYoZmFsc2UpOwogIGNvbnN0IGhhbmRsZUNhcnRTaG93Q2hhbmdlID0gKCkgPT4gewogICAgc2hvd0NhcnQudmFsdWUgPSAhc2hvd0NhcnQudmFsdWU7CiAgfTsKICByZXR1cm4gewogICAgc2hvd0NhcnQsCiAgICBoYW5kbGVDYXJ0U2hvd0NoYW5nZQogIH07Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2FydCIsCiAgc2V0dXAoKSB7CiAgICBjb25zdCBzaG9wSWQgPSB1c2VSb3V0ZSgpLnBhcmFtcy5pZDsKICAgIGNvbnN0IHsKICAgICAgY2FsY3VsYXRpb25zLAogICAgICBwcm9kdWN0TGlzdCwKICAgICAgY2hhbmdlQ2FydEl0ZW1JbmZvLAogICAgICBjaGFuZ2VDYXJ0SXRlbUNoZWNrZWQsCiAgICAgIGNsZWFuQ2FydFByb2R1Y3RzLAogICAgICBzZXRDYXJ0SXRlbXNDaGVja2VkLAogICAgICBnZXRBbGxhZGRyZXNzCiAgICB9ID0gdXNlQ2FydEVmZmVjdChzaG9wSWQpOwogICAgY29uc3QgewogICAgICBzaG93Q2FydCwKICAgICAgaGFuZGxlQ2FydFNob3dDaGFuZ2UKICAgIH0gPSB0b2dnbGVDYXJ0RWZmZWN0KCk7CiAgICByZXR1cm4gewogICAgICBnZXRBbGxhZGRyZXNzLAogICAgICBjYWxjdWxhdGlvbnMsCiAgICAgIHByb2R1Y3RMaXN0LAogICAgICBzaG9wSWQsCiAgICAgIGNoYW5nZUNhcnRJdGVtSW5mbywKICAgICAgY2hhbmdlQ2FydEl0ZW1DaGVja2VkLAogICAgICBjbGVhbkNhcnRQcm9kdWN0cywKICAgICAgc2V0Q2FydEl0ZW1zQ2hlY2tlZCwKICAgICAgc2hvd0NhcnQsCiAgICAgIGhhbmRsZUNhcnRTaG93Q2hhbmdlCiAgICB9OwogIH0KfTs="},{"version":3,"names":["ref","useStore","useRoute","useCommonCartEffect","useCartEffect","shopId","changeCartItemInfo","productList","calculations","store","changeCartItemChecked","productId","commit","cleanCartProducts","showCart","setCartItemsChecked","getAlladdress","dispatch","toggleCartEffect","handleCartShowChange","value","name","setup","params","id"],"sources":["/Users/liushuai/Desktop/jingdong/src/views/shop/Cart.vue"],"sourcesContent":["<template>\n  <div\n    class=\"mask\"\n    v-if=\"showCart && calculations.total > 0\"\n    @click=\"handleCartShowChange\"\n  ></div>\n  <div class=\"cart\">\n    <div class=\"product\" v-if=\"showCart && calculations.total > 0\">\n      <div class=\"product__header\">\n        <div\n          class=\"product__header__all\"\n          @click=\"() => setCartItemsChecked(shopId)\"\n        >\n          <span\n            class=\"product__header__icon iconfont\"\n            v-html=\"calculations.allChecked ? '&#xe652;' : '&#xe7ae;'\"\n          ></span>\n          全选\n        </div>\n        <div\n          class=\"product__header__clear\"\n          @click=\"\n            () => {\n              cleanCartProducts(shopId), handleCartShowChange();\n            }\n          \"\n        >\n          清空购物车\n        </div>\n      </div>\n      <div class=\"product__item\" v-for=\"item in productList\" :key=\"item._id\">\n        <div\n          class=\"product__item__checked iconfont\"\n          v-html=\"item.check ? '&#xe652;' : '&#xe7ae;'\"\n          @click=\"() => changeCartItemChecked(shopId, item._id)\"\n        ></div>\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" alt=\"\" />\n        <div class=\"product__item__detail\">\n          <h4 class=\"product__item__title\">{{ item.name }}</h4>\n          <p class=\"product__item__price\">\n            <span class=\"product__item__yen\">&yen;</span>{{ item.price }}\n            <span class=\"product__item__origin\">&yen;{{ item.oldPrice }}</span>\n          </p>\n        </div>\n        <div class=\"product__number\">\n          <span\n            class=\"product__number__minus iconfont\"\n            @click=\"\n              () => {\n                changeCartItemInfo(shopId, item._id, item, -1);\n              }\n            \"\n            >&#xe62a;</span\n          >\n          {{ item.count || 0 }}\n          <span\n            class=\"product__number__add iconfont\"\n            @click=\"\n              () => {\n                changeCartItemInfo(shopId, item._id, item, 1);\n              }\n            \"\n            >&#xe661;</span\n          >\n        </div>\n      </div>\n    </div>\n    <div class=\"check\">\n      <div class=\"check__icon iconfont\" @click=\"handleCartShowChange\">\n        &#xe79a;\n      </div>\n      <div class=\"check__count\">{{ calculations.total }}</div>\n\n      <div class=\"check__info\" v-if=\"calculations.price > 0\">\n        总计：\n        <span class=\"check__info__price\"> {{ calculations.price }}</span>\n      </div>\n      <div v-else>购物车是空的</div>\n\n      <div\n        class=\"check__btn\"\n        v-show=\"calculations.total > 0\"\n        @click=\"getAlladdress\"\n      >\n        <router-link :to=\"{ path: `/OrderConfirmation/${shopId}` }\">\n          去结算\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRoute } from \"vue-router\";\nimport { useCommonCartEffect } from \"../../effects/cartEffects.js\";\n\n//获取购物车信息逻辑\nconst useCartEffect = (shopId) => {\n  const { changeCartItemInfo, productList, calculations } =\n    useCommonCartEffect(shopId);\n  const store = useStore();\n\n  const changeCartItemChecked = (shopId, productId) => {\n    store.commit(\"changeCartItemChecked\", { shopId, productId });\n  };\n  //清空购物车\n  const cleanCartProducts = (shopId, showCart) => {\n    store.commit(\"cleanCartProducts\", { shopId });\n  };\n\n  //\n  const setCartItemsChecked = (shopId) => {\n    store.commit(\"setCartItemsChecked\", { shopId });\n  };\n\n  const getAlladdress = () => {\n      store.dispatch(\"getAlladdress\");\n    };\n  return {\n    getAlladdress,\n    calculations,\n    productList,\n    changeCartItemInfo,\n    changeCartItemChecked,\n    cleanCartProducts,\n    setCartItemsChecked,\n  };\n};\n\nconst toggleCartEffect = () => {\n  const showCart = ref(false);\n  const handleCartShowChange = () => {\n    showCart.value = !showCart.value;\n  };\n  return { showCart, handleCartShowChange };\n};\n\nexport default {\n  name: \"Cart\",\n  setup() {\n    const shopId = useRoute().params.id;\n    const {\n      calculations,\n      productList,\n      changeCartItemInfo,\n      changeCartItemChecked,\n      cleanCartProducts,\n      setCartItemsChecked,\n      getAlladdress\n    } = useCartEffect(shopId);\n    const { showCart, handleCartShowChange } = toggleCartEffect();\n    \n    return {\n      getAlladdress,\n      calculations,\n      productList,\n      shopId,\n      changeCartItemInfo,\n      changeCartItemChecked,\n      cleanCartProducts,\n      setCartItemsChecked,\n      showCart,\n      handleCartShowChange,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../style/viriables.scss\";\n@import \"../../style/mixins.scss\";\n.mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1;\n}\n.cart {\n  z-index: 2;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: #fff;\n}\n\n.check {\n  display: flex;\n  height: 0.49rem;\n  line-height: 0.49rem;\n  border-top: 0.01em solid $content-bgColor;\n  &__icon {\n    font-size: 0.3rem;\n    width: 0.28rem;\n    margin-left: 0.24rem;\n    color: #4fb0f9;\n  }\n  &__count {\n    background-color: $hightlight-fontColor;\n    min-width: 0.2rem;\n    height: 0.2rem;\n    line-height: 0.2rem;\n    text-align: center;\n    transform: scale(0.8);\n    font-size: 0.12rem;\n    border-radius: 0.1rem;\n    color: #fff;\n    position: relative;\n    top: 0.02rem;\n    left: -0.05rem;\n    padding: 0 0.05rem;\n  }\n  &__info {\n    flex: 1;\n    line-height: 0.49rem;\n    color: #333;\n    font-size: 0.12rem;\n    &__price {\n      color: $hightlight-fontColor;\n      font-size: 0.18rem;\n    }\n  }\n  &__btn {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    width: 0.98rem;\n    font-size: 0.14rem;\n    text-align: center;\n    background-color: #4fb0f9;\n    a {\n      color: $bg-color;\n      text-decoration: none;\n    }\n  }\n}\n.product {\n  overflow-y: scroll;\n  flex: 1;\n  background-color: $bg-color;\n  &__header {\n    display: flex;\n    justify-content: space-between;\n    line-height: 0.52rem;\n    border-bottom: 0.01rem solid #f1f1f1;\n    font-size: 0.14rem;\n    color: #333;\n    &__all {\n      width: 0.64rem;\n      margin-left: 0.16rem;\n    }\n    &__icon {\n      color: #0091ff;\n      font-size: 0.2rem;\n      margin-right: 0.08rem;\n      position: relative;\n      top: 0.02rem;\n    }\n    &__clear {\n      margin-right: 0.16rem;\n      text-align: right;\n      width: 0.7rem;\n    }\n  }\n  &__item {\n    position: relative;\n    display: flex;\n    padding: 0.12rem 0;\n    margin: 0 0.16rem;\n    border-bottom: 0.01rem solid $content-bgColor;\n    &__checked {\n      font-size: 0.2rem;\n      color: #0091ff;\n      line-height: 0.46rem;\n      margin-right: 0.16rem;\n    }\n    &__detail {\n      overflow: hidden;\n    }\n    &__img {\n      width: 0.46rem;\n      height: 0.46rem;\n      margin-right: 0.16rem;\n    }\n    &__title {\n      line-height: 0.2rem;\n      font-size: 0.14rem;\n      color: $content-fontColor;\n      margin: 0;\n      @include ellipsis;\n    }\n    &__price {\n      color: $hightlight-fontColor;\n      margin: 0.06rem 0 0 0;\n      line-height: 0.2rem;\n      font-size: 0.14rem;\n    }\n    &__yen {\n      color: $hightlight-fontColor;\n      font-size: 0.12rem;\n    }\n    &__origin {\n      line-height: 0.2rem;\n      font-size: 0.12rem;\n      color: $light-fontColor;\n      text-decoration: line-through;\n    }\n    .product__number {\n      position: absolute;\n      right: 0;\n      bottom: 0.2rem;\n      line-height: 0.25rem;\n      font-size: 0.14rem;\n      color: #333;\n      &__minus,\n      &__add {\n        position: relative;\n        top: 0.04rem;\n        display: inline-block;\n        line-height: 0.24rem;\n        border-radius: 50%;\n        font-size: 0.25rem;\n        text-align: center;\n      }\n      &__minus {\n        color: $btn-bgColor;\n        margin-right: 0.05rem;\n      }\n      &__add {\n        color: $btn-bgColor;\n        margin-left: 0.05rem;\n      }\n    }\n  }\n}\n</style>"],"mappings":"AA4FA,SAASA,GAAE,QAAS,KAAK;AACzB,SAASC,QAAO,QAAS,MAAM;AAC/B,SAASC,QAAO,QAAS,YAAY;AACrC,SAASC,mBAAkB,QAAS,8BAA8B;;AAElE;AACA,MAAMC,aAAY,GAAKC,MAAM,IAAK;EAChC,MAAM;IAAEC,kBAAkB;IAAEC,WAAW;IAAEC;EAAa,IACpDL,mBAAmB,CAACE,MAAM,CAAC;EAC7B,MAAMI,KAAI,GAAIR,QAAQ,EAAE;EAExB,MAAMS,qBAAoB,GAAIA,CAACL,MAAM,EAAEM,SAAS,KAAK;IACnDF,KAAK,CAACG,MAAM,CAAC,uBAAuB,EAAE;MAAEP,MAAM;MAAEM;IAAU,CAAC,CAAC;EAC9D,CAAC;EACD;EACA,MAAME,iBAAgB,GAAIA,CAACR,MAAM,EAAES,QAAQ,KAAK;IAC9CL,KAAK,CAACG,MAAM,CAAC,mBAAmB,EAAE;MAAEP;IAAO,CAAC,CAAC;EAC/C,CAAC;;EAED;EACA,MAAMU,mBAAkB,GAAKV,MAAM,IAAK;IACtCI,KAAK,CAACG,MAAM,CAAC,qBAAqB,EAAE;MAAEP;IAAO,CAAC,CAAC;EACjD,CAAC;EAED,MAAMW,aAAY,GAAIA,CAAA,KAAM;IACxBP,KAAK,CAACQ,QAAQ,CAAC,eAAe,CAAC;EACjC,CAAC;EACH,OAAO;IACLD,aAAa;IACbR,YAAY;IACZD,WAAW;IACXD,kBAAkB;IAClBI,qBAAqB;IACrBG,iBAAiB;IACjBE;EACF,CAAC;AACH,CAAC;AAED,MAAMG,gBAAe,GAAIA,CAAA,KAAM;EAC7B,MAAMJ,QAAO,GAAId,GAAG,CAAC,KAAK,CAAC;EAC3B,MAAMmB,oBAAmB,GAAIA,CAAA,KAAM;IACjCL,QAAQ,CAACM,KAAI,GAAI,CAACN,QAAQ,CAACM,KAAK;EAClC,CAAC;EACD,OAAO;IAAEN,QAAQ;IAAEK;EAAqB,CAAC;AAC3C,CAAC;AAED,eAAe;EACbE,IAAI,EAAE,MAAM;EACZC,KAAKA,CAAA,EAAG;IACN,MAAMjB,MAAK,GAAIH,QAAQ,EAAE,CAACqB,MAAM,CAACC,EAAE;IACnC,MAAM;MACJhB,YAAY;MACZD,WAAW;MACXD,kBAAkB;MAClBI,qBAAqB;MACrBG,iBAAiB;MACjBE,mBAAmB;MACnBC;IACF,IAAIZ,aAAa,CAACC,MAAM,CAAC;IACzB,MAAM;MAAES,QAAQ;MAAEK;IAAqB,IAAID,gBAAgB,EAAE;IAE7D,OAAO;MACLF,aAAa;MACbR,YAAY;MACZD,WAAW;MACXF,MAAM;MACNC,kBAAkB;MAClBI,qBAAqB;MACrBG,iBAAiB;MACjBE,mBAAmB;MACnBD,QAAQ;MACRK;IACF,CAAC;EACH;AACF,CAAC"}]}